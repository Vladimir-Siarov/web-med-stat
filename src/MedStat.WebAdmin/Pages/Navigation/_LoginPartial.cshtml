@using Microsoft.AspNetCore.Identity

@inject SignInManager<MedStat.Core.Identity.SystemUser> SignInManager
@inject UserManager<MedStat.Core.Identity.SystemUser> UserManager

<ul class="navbar-nav">

	@if (SignInManager.IsSignedIn(User))
	{
		<li class="nav-item dropdown">
			<a class="nav-link dropdown-toggle" id="navbar_ProfileDropdownMenuLink" data-toggle="dropdown"
				 aria-haspopup="true" aria-expanded="false">
				<i class="fas fa-user mr-2"></i>@User.Identity.Name
			</a>

			<div class="dropdown-menu dropdown-menu-right dropdown-default" aria-labelledby="navbar_ProfileDropdownMenuLink">
				<a class="dropdown-item" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage Profile">Profile</a>
				<a class="dropdown-item" href="javascript:void(0)" onclick="$('#navbar_btnLogout').click()">Logout</a>
				<a class="dropdown-item" asp-area="" asp-page="/Privacy">Privacy</a>
			</div>

			<form class="d-none" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Page("/", new { area = "" })" method="post">
				<button type="submit" id="navbar_btnLogout" class="nav-link btn btn-link">Logout</button>
			</form>
		</li>
	}
	else
	{
		<li class="nav-item dropdown">
			<a class="nav-link dropdown-toggle" id="navbar_ProfileDropdownMenuLink" data-toggle="dropdown"
				 aria-haspopup="true" aria-expanded="false">
				<i class="fas fa-user"></i>
			</a>

			<div class="dropdown-menu dropdown-menu-right dropdown-default" aria-labelledby="navbar_ProfileDropdownMenuLink">
				<a class="dropdown-item" asp-area="Identity" asp-page="/Account/Login" title="Login">Login</a>
				@*<a class="nav-link text-dark" asp-area="Identity" asp-page="/Account/Register">Register</a>*@
				<a class="dropdown-item" asp-area="" asp-page="/Privacy">Privacy</a>
			</div>
		</li>
	}
</ul>
