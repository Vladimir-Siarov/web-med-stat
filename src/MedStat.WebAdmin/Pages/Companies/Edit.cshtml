@page "{id:int}/{section?}"

@using MedStat.WebAdmin.Classes
@using MedStat.WebAdmin.Classes.SharedResources
@using MedStat.WebAdmin.Models
@using Microsoft.AspNetCore.Mvc.Localization

@model CompanyEditModel

@inject IHtmlLocalizer<CompanyResource> CmpLocalizer

@{
	ViewData["Title"] = Model.Company.Name;
	ViewData.SetSelectedMainMenu(NavHelper.EnMainMenuItem.Company);
}

@section PageHeader
{
	<nav aria-label="breadcrumb">
		<breadcrumb menu-item="@NavHelper.EnMainMenuItem.Company"
								page-title="@Model.Company.Name"></breadcrumb>
	</nav>

	@if (ViewData["success_message"] != null)
	{
		<div class="alert alert-success" role="alert">
			@ViewData["success_message"]
		</div>
	}

	@if (ViewData["error_message"] != null)
	{
		<div class="alert alert-danger" role="alert">
			@ViewData["error_message"]
		</div>
	}

	<h1 class="ms-pageheader-pagetitle">@Model.Company.Name</h1>
}

<partial name="_PageNavTopPanel"
				 model="@(new CompanyPageNavModel { CompanyId = Model.Company.Id, Section = Model.Section })" />

<div class="ms-pagecontent">

	<form method="post" class="ms-form-container">

		<input type="hidden" asp-for="Company.Id" class="form-control" />

		@{
			switch (Model.Section)
			{
				case EnCompanySection.Main:
					{
						// <partial name="_MainTab" model="@Model.Company"/>
						<text>
							@Html.EditorFor(m => m.Company, "~/Pages/Companies/_MainTab.cshtml")
						</text>
					}
					break;

				case EnCompanySection.Requisites:
					{
						// <partial name="_RequisitesTab" model="@Model.Company.Requisites" />
						<text>
							@Html.EditorFor(m => m.Company.Requisites, "~/Pages/Companies/_RequisitesTab.cshtml")
						</text>
					}
					break;

				default:
					break;
			}
		}

		<button class="btn btn-primary" type="submit">@CmpLocalizer["Save"]</button>

	</form>

</div>